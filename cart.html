<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Корзина - Bibim Mood</title>
  
  <style>
    @font-face {
      font-family: 'Involve-Regular';
      src: url('assets/Involve-Regular.ttf');
    }

    @font-face {
      font-family: 'Involve-Medium';
      src: url('assets/Involve-Medium.ttf');
    }

    @font-face {
      font-family: 'Involve-SemiBold';
      src: url('assets/Involve-SemiBold.ttf');
    }

    @font-face {
      font-family: 'Involve-Bold';
      src: url('assets/Involve-Bold.ttf');
    }
    @font-face {
      font-family: 'Dela Gothic One';
      src: url('assets/DelaGothicOne-Regular.ttf')
    }

    /* Базовые стили */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      background: #FFF5E5;
      color: #2A2625;
      font-family: 'Involve-Medium';
      font-size: 20px;
      line-height: 1.5;
    }

    /* Контейнеры */
    .container1 {
      max-width: 1198px;
      margin: 0 auto;
    }

    .container2 {
      max-width: 1081px;
      margin: 0 auto;
    }

    .container3 {
      max-width: 1366px;
      margin: 0 auto;
    }

    /* Навигация */
    .middle-navigation {
  		display: flex;
  		flex-flow: row;
  	  text-align: center;
  		justify-content: space-between;
    }

    .middle-navigation nav ul {
      list-style: none;
      display: inline-flex;
      gap: 40px;
      margin-top: 90px;
      padding: 0;
    }

    .middle-navigation nav ul li a {
      color: #2A2625;
      text-decoration: none;
      font-size: 20px;
      font-weight: 500;
      transition: color .3s, font-size .3s;
    }

    .middle-navigation nav ul li:not(.no-hover) a:hover {
      color: #F04F24;
      font-size: 24px;
      text-decoration: underline;
    }

    h2 {
      font-size: 32px;
      font-family: 'Involve-SemiBold';
    }

    /* Карточка товара */
    .cart-item {
      display: flex;
      align-items: flex-start;
      width: 1013px;
      height: 219px;
      background: #2A2625;
      border-radius: 20px;
      position: relative;
      margin-bottom: 30px;
    }

    .cart-item img {
      width: 348px;
      height: 219px;
      object-fit: cover;
      border: 3px solid #2A2625;
      border-top-left-radius: 20px;
      border-bottom-left-radius: 20px;
    }

    .cart-item .info {
      width: 350px;
      padding: 20px;
    }

    .cart-item .info .title {
      font-family: 'Involve-Bold';
      font-size: 20px;
      color: #FFF5E5;
      margin-bottom: 8px;
    }

    .cart-item .info .desc {
      font-family: 'Involve-Regular';
      font-size: 18px;
      color: #FFF5E5;
      margin-bottom: 20px;
    }

    .cart-item .info .weight {
      font-family: 'Involve-Regular';
      font-size: 18px;
      color: #F04F24;
    }

    /* Счетчик количества */
    .quantity-control {
      width: 150px;
      height: 52px;
      border: 3px solid #F04F24;
      border-radius: 15px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 10px;
      margin-left: 20px;
      margin-top: 85px;
    }

    .quantity-control button {
      background: transparent;
      border: none;
      font-family: 'Involve-SemiBold';
      font-size: 36px;
      color: #F04F24;
      cursor: pointer;
    }

    .quantity-control span {
      font-family: 'Involve-SemiBold';
      font-size: 24px;
      color: #FFF5E5;
    }

    /* Цена */
    .item-price {
      font-family: 'Involve-SemiBold';
      font-size: 24px;
      color: #FFF5E5;
      margin-left: 35px;
      margin-top: 93px;
    }

    .remove-btn {
      position: absolute;
      right: -30px;
      top: 50%;
      transform: translateY(-50%);
      cursor: pointer;
      font-size: 24px;
      color: #F04F24;
    }

    /* Блок приборов */
    .cutlery {
      display: flex;
      align-items: center;
      width: 1013px;
      height: 113px;
      background: #2A2625;
      border-radius: 20px;
      padding: 0 48px;
      margin-bottom: 40px;
    }

    .cutlery .label {
      font-family: 'Involve-Bold';
      font-size: 24px;
      color: #FFF5E5;
      width: 280px;
    }

    .cutlery .quantity-control {
      margin: 0 0 0 390px;
    }

    .separator {
      height: 3px;
      background: #2A2625;
      margin: 40px 0;
      width: 100%;
    }

    /* Итого */
    .total {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      margin-bottom: 40px;
    }

    .total h2 {
      margin: 0;
    }

    .total .sum {
      font-family: 'Involve-SemiBold';
      font-size: 40px;
      color: #2A2625;
    }

    /* Формы */
    .field-group {
      display: flex;
      gap: 20px;
      margin-bottom: 40px;
    }

    .field-group input {
      width: 531px;
      height: 71px;
      background: #D0C6B6;
      border: 3px solid #2A2625;
      border-radius: 15px;
      padding: 0 20px;
      font-size: 20px;
      font-family: 'Involve-Medium';
    }

    /* Способы доставки */
    .delivery-method {
      margin-bottom: 30px;
      display: flex;
      align-items: center;
      gap: 45px;
    }

    .delivery-method p {
      font-size: 24px;
      font-family: 'Involve-Medium';
      margin: 0;
    }

    .delivery-method .btn-group {
      display: inline-flex;
      gap: 20px;
    }

    .delivery-method button {
      padding: 12.5px 28px;
      border: 3px solid #2A2625;
      border-radius: 15px;
      background: transparent;
      font-size: 20px;
      font-family: 'Involve-Medium';
      cursor: pointer;
      transition: background .3s, color .3s;
    }

    .delivery-method button.active {
      background: #2A2625;
      color: #FFF5E5;
      font-family: 'Involve-Bold';
    }

    /* Адреса */
    .select-address {
      max-width: 816px;
      margin: 0;
      font-family: 'Involve-Medium';
      font-size: 20px;
      color: #2A2625;
      margin-bottom: 30px;
    }

    .address-buttons {
      display: flex;
      gap: 20px;
      justify-content: center;
      margin-bottom: 50px;
    }

    .address-buttons button {
      padding: 12.5px 28px;
      border: 3px solid #3A31FE;
      border-radius: 15px;
      background: transparent;
      font-family: 'Involve-Medium';
      font-size: 20px;
      color: #2A2625;
      cursor: pointer;
      transition: background .3s, color .3s;
    }

    .address-buttons button.active {
      background: #3A31FE;
      color: #FFF5E5;
      font-family: 'Involve-SemiBold';
    }

    /* Дата и время */
    .datetime-group {
      max-width: 1081px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    }

    .datetime-group input {
      width: 531px;
      height: 71px;
      background: #D0C6B6;
      border: 3px solid #2A2625;
      border-radius: 15px;
      padding: 0 20px;
      font-size: 20px;
      font-family: 'Involve-Medium';
    }

    /* Способы оплаты */
    .pay-method {
      margin-bottom: 30px;
      display: flex;
      align-items: center;
      gap: 45px;
    }

    .pay-method p {
      font-size: 24px;
      font-family: 'Involve-Medium';
      margin: 0;
    }

    .pay-method .btn-group {
      display: inline-flex;
      gap: 20px;
    }

    .pay-method button {
      padding: 12.5px 28px;
      border: 3px solid #2A2625;
      border-radius: 15px;
      background: transparent;
      font-size: 20px;
      font-family: 'Involve-Medium';
      cursor: pointer;
      transition: background .3s, color .3s;
    }

    .pay-method button.active {
      background: #2A2625;
      color: #FFF5E5;
      font-family: 'Involve-Bold';
    }

    /* Комментарии */
    .comment-section {
      max-width: 1081px;
      margin: 0 auto;
      margin-bottom: 100px;
    }

    .comment-section textarea {
      width: 895px;
      height: 167px;
      background: #D0C6B6;
      border: 3px solid #2A2625;
      border-radius: 15px;
      padding: 10px;
      font-size: 20px;
      font-family: 'Involve-Medium';
    }

    /* Согласие */
    .consent {
      display: flex;
      align-items: center;
      gap: 25px;
      margin-bottom: 40px;
    }

    .consent .checkbox {
      width: 35px;
      height: 35px;
      border: 3px solid #2A2625;
      border-radius: 50%;
      cursor: pointer;
      position: relative;
    }

    .consent .checkbox.checked::after {
      content: '';
      position: absolute;
      width: 21px;
      height: 21px;
      background: #3A31FE;
      border-radius: 50%;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .consent label {
      font-family: 'Involve-Medium';
      font-size: 20px;
      color: #2A2625;
    }

    /* Кнопка заказа */
    .order-btn {
      display: block;
      margin: 0 auto 100px;
      padding: 17px 127px;
      background: #F04F24;
      border: none;
      border-radius: 15px;
      font-family: 'Involve-Bold';
      font-size: 30px;
      color: #2A2625;
      cursor: pointer;
      transition: background .3s, color .3s;
    }

    .order-btn:hover {
      background: #3A31FE;
      color: #FFF5E5;
    }

    /* Стили для сообщения об успешном заказе */
    .success-message {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #F04F24;
      color: #FFF5E5;
      padding: 20px 100px;
      border-radius: 20px;
      font-family: 'Involve-SemiBold';
      font-size: 24px;
      z-index: 1001;
      border: 3px solid #2A2625;
      box-shadow: 0px 0px 25px #2A2625;
    }

    /* Футер */
    .footer {
      background: #F04F24;
      color: #2A2625;
      padding: 65px 0;
      text-align: center;
    }

    .footer-social-icons {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 30px;
    }

    .social-icon img {
      height: 73px;
      transition: transform .3s;
    }

    .social-icon:hover img {
      transform: scale(1.1);
    }

    .footer-text {
      font-size: 20px;
      line-height: 1.5;
    }

    /* Скрытие "вернуться в меню" на десктопе */
    .back-to-menu {
      display: none;
    }
    .spacer0 {
      height: 100px;
    }
    .spacer1 {
      height: 100px;
    }
    .spacer2 {
      height: 40px;
    }
    .spacer3 {
      height: 30px;
    }
    #datetime-text {
      font-size: 24px;
      font-family: 'Involve-Medium';
    }

    /* Mobile Styles */
    @media (max-width: 480px) {
      .container1, .container3 {
        max-width: 375px;
      }
      .container2 {
        max-width: 335px;
      }
      .no-hover {
        margin-top: 0px !important;
        padding: 0px !important;
      }
      .middle-navigation nav ul {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 0px;
        padding: 0px 20px;
      }
      .middle-navigation nav ul li:not(.no-hover) {
        display: none;
      }
      .middle-navigation nav ul li.no-hover {
        padding: 0;
        margin: 0;
      }
      .middle-navigation nav ul li.no-hover:first-child a img {
        height: 84px;
      }
      .middle-navigation nav ul li.no-hover:last-child a img {
        height: 23px;
        padding-left: 200px;
      }
      .hero {
        height: 98px;
        margin-top: -34px !important;
      }
      .hero-h1 {
        font-size: 32px;
        width: auto;
        padding: 0 20px;
      }
      .imgcart {
        margin-bottom: 20px;
      }
      .back-to-menu {
        display: block;
        font-size: 16px;
        color: #5F5F5F;
        font-family: 'Involve-Medium';
        margin-bottom: 40px;
      }
      h2 {
        font-size: 20px;
        font-family: 'Involve-SemiBold';
        color: #2A2625;
        margin-bottom: 20px;
      }
      .cart-item {
        width: 335px;
        height: 520px;
        border-radius: 20px;
        flex-direction: column;
        margin-bottom: 20px;
      }
      .cart-item img {
        width: 335px;
        height: 273px;
        border-radius: 20px 20px 0 0;
      }
      .cart-item .info {
        width: 100%;
        padding: 20px 20px 30px;
      }
      .cart-item .info .title {
        font-size: 20px;
        font-family: 'Involve-Bold';
      }
      .cart-item .info .desc {
        font-size: 14px;
        font-family: 'Involve-Medium';
        margin-bottom: 8px;
      }
      .cart-item .info .weight {
        font-size: 16px;
        font-family: 'Involve-SemiBold';
      }
      .quantity-control {
        width: 132px;
        height: 46px;
        margin: 0;
        position: absolute;
        bottom: 30px;
        right: 20px;
      }
      .quantity-control button {
        font-size: 36px;
      }
      .quantity-control span {
        font-size: 24px;
      }
      .item-price {
        font-size: 24px;
        position: absolute;
        bottom: 30px;
        left```html
        left: 20px;
        margin: 0px !important;
      }
      .remove-btn {
        right: 18px;
        top: 23px;
      }
      .cutlery {
        width: 335px;
        height: 120px;
        padding: 30px 20px 35px;
        margin-bottom: 20px;
      }
      .cutlery .label {
        font-size: 16px;
        font-family: 'Involve-Bold';
        width: 120px;
      }
      .cutlery .quantity-control {
        margin: 0 0 0 40px;
        position: inherit;
      }
      .separator {
        width: 335px;
        margin: 20px auto 35px auto;
      }
      #separator2 {
        margin-bottom: 80px !important;
      }
      .total h2 {
        font-size: 24px;
      }
      .total .sum {
        font-size: 36px;
      }
      .field-group {
        flex-direction: column;
        gap: 20px;
        margin-bottom: 80px;
      }
      .field-group p {
        font-size: 16px !important;
        margin-bottom: 7px;
      }
      .field-group input {
        width: 335px;
        height: 46px;
        font-size: 16px;
      }
      .delivery-method {
        flex-direction: column;
        align-items: flex-start;
        gap: 20px;
      }
      .delivery-method p {
        font-size: 16px !important;
      }
      .delivery-method button {
        padding: 10.5px 25px;
        font-size: 16px;
      }
      .select-address {
        font-size: 16px;
      }
      .address-buttons {
        display: flex;
        flex-flow: wrap;
        gap: 15px;
        justify-content: flex-start;
        margin-bottom: 40px;
      }
      .address-buttons button {
        padding: 6px 28px;
        font-size: 16px;
        border-radius: 20px;
      }
      .datetime-group {
        margin-bottom: 80px;
      }
      .datetime-group p {
        font-size: 16px !important;
      }
      .datetime-group input {
        width: 335px;
        height: 46px;
        font-size: 16px;
      }
      .pay-method {
        flex-direction: column;
        align-items: flex-start;
        gap: 20px;
        margin-bottom: 10px;
      }
      .pay-method p {
        font-size: 16px;
      }
      .pay-method button {
        padding: 10.5px 22px;
        font-size: 16px;
      }
      .pay-method .btn-group {
        display: flex;
        flex-flow: wrap;
        gap: 15px;
      }
      .comment-section {
        margin-bottom: 80px;
      }
      .comment-section textarea {
        width: 335px;
        height: 157px;
        font-size: 16px;
      }
      .consent .checkbox {
        width: 36px !important;
        height: 36px !important;
      }
      .consent .checkbox.checked::after {
        width: 20px;
        height: 20px;
      }
      .consent label {
        font-size: 14px;
        width: 270px;
      }
      .order-btn {
        padding: 9.5px 75px;
        font-size: 20px;
        font-family: 'Involve-Bold';
        color: #2A2625;
        margin-bottom: 0px !important;
      }
      .footer {
        padding-bottom: 65px !important;
        padding-top: 35px;
        margin-top: 80px !important;
        height: auto !important;
      }
      .footer-social-icons {
        gap: 10px;
        margin-bottom: 20px !important;
      }
      .social-icon img {
        height: 38px;
      }
      .footer-text {
        width: auto;
        font-size: 12px;
        color: #2A2625;
        font-family: 'Involve-Medium';
      }
      .footer .container2 p {
        font-size: 12px;
        color: #2A2625;
        font-family: 'Involve-Medium';
      }
      .spacer0 {
        height: 40px;
      }
      .spacer1 {
        height: 0px;
        display: none;
      }
      .spacer2 {
        height: 0px;
        display: none;
      }
      .spacer3 {
        height: 0px;
        display: none;
      }
      #datetime-text {
        font-size: 16px;
      }
      /* Мобильная адаптация для success-message */
      .success-message {
        width: 335px;
        padding: 25px;
        font-size: 20px;
        text-align: center;
      }
    }
  </style>
</head>
<body>
  <div class="container1">
    <div class="middle-navigation">
      <nav><ul>
        <li class="no-hover" style="padding-right: 50px; margin-top: -90px; padding-left: 50px;">
          <a href="index.html"><img src="assets/logo.png" alt="логотип" height="197px"></a>
        </li>
        <li><a href="menu.html">меню</a></li>
        <li><a href="delivery.html">условия доставки</a></li>
        <li><a href="about.html">о нас</a></li>
        <li><a href="contacts.html">контакты</a></li>
        <li><a href="K-culture.html">k-culture</a></li>
        <li class="no-hover" style="padding-left: 40px;">
          <a href="cart.html"><img src="assets/cart.png" alt="Корзина" class="imgcart"></a>
        </li>
      </ul></nav>
    </div>
  </div>
  <div class="spacer0"></div>
  <div class="container2">
    <a href="index.html" class="back-to-menu">< вернуться в меню</a>
    <h2>КОРЗИНА</h2>
    <div class="spacer2"></div>
    <div id="cart-items"></div>
  </div>
  <div class="container2">
    <div class="cutlery">
      <div class="label">Количество приборов</div>
      <div class="quantity-control" data-item="cutlery"><button class="dec">-</button><span>1</span><button class="inc">+</button></div>
    </div>
    <div class="separator"></div>
    <div class="total"><h2>ИТОГО</h2><div class="sum">0 ₽</div></div>
    <div class="separator" id="separator2"></div>
  </div>
  <div class="spacer1"></div>
  <div class="container2">
    <h2>КОНТАКТЫ</h2>
    <div class="spacer2"></div>
    <div class="field-group">
      <div><p style="font-size:24px;font-family:'Involve-Medium';margin-bottom:8px;">Ваше имя</p><input type="text" placeholder="Ваше имя"></div>
      <div><p style="font-size:24px;font-family:'Involve-Medium';margin-bottom:8px;">Номер телефона:</p><input type="tel" placeholder="Номер телефона"></div>
    </div>
  </div>
  <div class="spacer1"></div>
  <div class="container2">
    <h2>СПОСОБ ДОСТАВКИ</h2><div class="spacer2"></div>
    <div class="container2 delivery-method">
      <p>Выберите способ доставки:</p>
      <div class="btn-group">
        <button data-method="pickup" class="active">Самовывоз</button>
        <button data-method="delivery">Доставка</button>
      </div>
    </div>
  </div>
  <div class="container2">
    <div class="select-address">Выберите адрес, по которому будет осуществляться самовывоз. При оплате наличными вам будет доступна скидка 10% от стоимости заказа.</div>
    <div class="address-buttons">
      <button data-key="marata">Марата</button>
      <button data-key="liteiny">Литейный</button>
      <button data-key="kamenno">Каменноостровский</button>
      <button data-key="engelsa">Энгельса</button>
      <button data-key="fontanki">Фонтанки</button>
    </div>
  </div>
  <div class="container2">
    <div class="datetime-group"><p id="datetime-text">Выберите дату и время самовывоза:</p>
    <div style="height:8px;"></div>
    <input type="datetime-local"></div>
  </div>
  
  <div class="spacer1"></div>
  <div class="container2">
    <h2>СПОСОБ ОПЛАТЫ</h2>
    <div class="spacer3"></div>
    <div class="container2 pay-method">
      <p>Выберите способ оплаты:</p>
      <div class="btn-group">
        <button data-method="money" class="active">Наличными</button>
        <button data-method="online">Оплата онлайн</button>
        <button data-method="card">Банковской картой</button>
      </div>
    </div>
  </div>
  <div style="height:70px;"></div>
  <div class="container2 comment-section">
    <h2>КОММЕНТАРИЙ К ЗАКАЗУ</h2>
    <div class="spacer3"></div>
    <textarea placeholder="Ваш комментарий к заказу..."></textarea>
  </div>
  <div class="container2">
    <div class="consent"><div class="checkbox"></div><label>Согласен с Политикой обработки персональных данных и Соглашением об условиях доставки</label></div>
    <button class="order-btn">ОФОРМИТЬ ЗАКАЗ</button>
    <!-- Окно успеха для заказа -->
    <div class="success-message" id="success-message">
      ВАШ ЗАКАЗ УСПЕШНО ОФОРМЛЕН!
    </div>
  </div>
  <div class="spacer1"></div>
  <footer class="footer">
    <div class="footer-social-icons"><a href="#" class="social-icon"><img src="assets/icon1.png" alt="VK"></a><a href="#" class="social-icon"><img src="assets/icon2.png" alt="Instagram"></a><a href="#" class="social-icon"><img src="assets/icon3.png" alt="Telegram"></a><a href="#" class="social-icon"><img src="assets/icon4.png" alt="WhatsApp"></a><a href="#" class="social-icon"><img src="assets/icon5.png" alt="Facebook"></a><a href="#" class="social-icon"><img src="assets/icon6.png" alt="ZZZ"></a></div>
    <div class="footer-text"><p>© 2025 Bibim Mood. Все права защищены.</p><p>Доставка: ежедневно с 11:00 до 23:00</p><p>Телефон: +7 (960) 086-38-33</p><p>Email: ko@bibimmood.ru</p></div>
  </footer>
  
  <script>
    const products = [
      {
        id: 1,
        name: 'Чиккен Пибимпаб',
        price: 590,
        img: 'assets/menu/чиккен пибимпаб.webp',
        desc: 'Этот пибимпаб объединяет нежный рис, хрустящую курицу в кляре, свежие овощи и ...',
        weight: '420 г'
      },
      {
        id: 2,
        name: 'Том ям',
        price: 760,
        img: 'assets/menu/томям[1].webp',
        desc: 'Свежие дары моря, томлёные в сливочной основе с грибами и черри, дарят взрыв контрастов ...',
        weight: '450 г'
      },
      {
        id: 3,
        name: 'Онигири с лососем',
        price: 250,
        img: 'assets/menu/онигири.jpg',
        desc: 'Лаконичная элегантность японской кухни: минимум ингредиентов, максимум вкуса ...',
        weight: '130 г'
      }
    ];

    const cartContainer = document.getElementById('cart-items');
    const totalEl = document.querySelector('.total .sum');
    const cutleryCtrl = document.querySelector('[data-item="cutlery"]');

    // Функция для получения товара по ID
    function getProductById(id) {
      return products.find(product => product.id === parseInt(id));
    }

    // Функция для обновления итоговой суммы
    function updateTotal() {
      let sum = 0;
      document.querySelectorAll('.cart-item').forEach(item => {
        const id = item.dataset.id;
        const prod = getProductById(id);
        const qty = parseInt(item.querySelector('.quantity-control span').innerText);
        sum += prod.price * qty;
      });
      totalEl.textContent = sum + ' ₽';
    }

    // Добавляем 3 разных товара
    for (let i = 0; i < 3; i++) {
      const prod = products[i];
      const div = document.createElement('div');
      div.className = 'cart-item';
      div.dataset.id = prod.id;

      div.innerHTML = `
        <img src="${prod.img}" alt="${prod.name}">
        <div class="info">
          <div class="title">${prod.name}</div>
          <div class="desc">${prod.desc}</div>
          <div class="weight">${prod.weight}</div>
        </div>
      `;

      const qtyCtrl = document.createElement('div');
      qtyCtrl.className = 'quantity-control';
      qtyCtrl.dataset.id = prod.id;
      qtyCtrl.innerHTML = '<button class="dec">-</button><span>1</span><button class="inc">+</button>';

      const priceEl = document.createElement('div');
      priceEl.className = 'item-price';
      priceEl.textContent = prod.price + ' ₽';

      const remove = document.createElement('div');
      remove.className = 'remove-btn';
      remove.textContent = '×';

      div.append(qtyCtrl, priceEl, remove);
      cartContainer.append(div);
    }

    // Обработчик кликов на корзине
    cartContainer.addEventListener('click', e => {
      const item = e.target.closest('.cart-item');
      if (!item) return;
      const id = item.dataset.id;
      const prod = getProductById(id);
      const span = item.querySelector('.quantity-control span');
      let qty = parseInt(span.innerText);

      if (e.target.classList.contains('inc')) {
        if (qty < 10) qty++;
        else alert('Максимум 10 штук в одной позиции');
      }
      if (e.target.classList.contains('dec')) {
        qty--;
      }

      if (e.target.classList.contains('inc') || e.target.classList.contains('dec')) {
        if (qty <= 0) {
          if (confirm('Удалить товар?')) {
            item.remove();
          } else {
            qty = 1;
          }
        }
        span.innerText = qty;
        item.querySelector('.item-price').innerText = prod.price * qty + ' ₽';
        updateTotal();
      }

      if (e.target.classList.contains('remove-btn')) {
        if (confirm('Удалить товар?')) {
          item.remove();
          updateTotal();
        }
      }
    });

    // Обработчик для приборов
    cutleryCtrl.addEventListener('click', e => {
      const span = cutleryCtrl.querySelector('span');
      let v = parseInt(span.innerText);

      if (e.target.classList.contains('inc')) {
        if (v < 10) v++;
        else alert('Нельзя взять больше 10 приборов');
      }
      if (e.target.classList.contains('dec')) {
        v = v > 0 ? v - 1 : 0;
      }

      span.innerText = v;
    });

    // HTML для самовывоза
    const pickupHTML = `
      <div class="container2">
        <div class="select-address">
          Выберите адрес, по которому будет осуществляться самовывоз. При оплате наличными вам будет доступна скидка 10% от стоимости заказа.
        </div>
        <div class="address-buttons">
          <button data-key="marata">Марата</button>
          <button data-key="liteiny">Литейный</button>
          <button data-key="kamenno">Каменноостровский</button>
          <button data-key="engelsa">Энгельса</button>
          <button data-key="fontanki">Фонтанки</button>
        </div>
      </div>
      <div class="container2">
        <p id="datetime-text">
          Выберите дату и время самовывоза:
        </p>
        <div style="height:8px;"></div>
        <div class="datetime-group">
          <input type="datetime-local">
        </div>
      </div>
    `;

    // HTML для доставки
    const deliveryHTML = `
      <div class="container2">
        <div class="select-address">
          Укажите адрес, по которому будет осуществляться доставка. Оплата доставки рассчитается автоматически в зависимости от зоны.
        </div>
      </div>
      <div class="container2">
        <div class="field-group" style="margin-bottom: 20px;">
          <div>
            <p style="font-size:24px;font-family:'Involve-Medium';margin-bottom:8px;">
              Введите ваш адрес
            </p>
            <input type="text" placeholder="Ваш адрес">
          </div>
        </div>
        <p id="datetime-text">
          Выберите дату и время доставки:
        </p>
        <div style="height:8px;"></div>
        <div class="datetime-group">
          <input type="datetime-local">
        </div>
      </div>
    `;

    // Функция инициализации кнопок адресов самовывоза
    function initPickupAddressButtons() {
      document.querySelectorAll('.address-buttons button').forEach(btn => {
        btn.addEventListener('click', () => {
          document.querySelectorAll('.address-buttons button').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
        });
      });
    }

    // Функция замены блоков доставки/самовывоза
    function renderAddressSections(isPickup) {
      const oldFirst = document.querySelector('.select-address').closest('.container2');
      const oldSecond = oldFirst.nextElementSibling;

      const wrapper = document.createElement('div');
      wrapper.innerHTML = isPickup ? pickupHTML : deliveryHTML;

      const newFirst = wrapper.children[0];
      const newSecond = wrapper.children[1];

      oldFirst.replaceWith(newFirst);
      oldSecond.replaceWith(newSecond);

      if (isPickup) initPickupAddressButtons();
    }

    // Обработчики для кнопок доставки
    document.querySelectorAll('.delivery-method .btn-group button').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.delivery-method .btn-group button').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        renderAddressSections(btn.dataset.method === 'pickup');
      });
    });

    // Обработчики для кнопок оплаты
    document.querySelectorAll('.pay-method .btn-group button').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.pay-method .btn-group button').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
      });
    });

    // Обработчик для чекбокса согласия
    document.querySelector('.consent .checkbox').addEventListener('click', function() {
      this.classList.toggle('checked');
    });

    // Обработка нажатия на кнопку "ОФОРМИТЬ ЗАКАЗ"
    document.querySelector('.order-btn').addEventListener('click', function() {
      document.getElementById('success-message').style.display = 'block';
      setTimeout(() => {
        document.getElementById('success-message').style.display = 'none';
      }, 3000);
    });

    // Инициализация итоговой суммы
    updateTotal();
  </script>
</body>
</html>
